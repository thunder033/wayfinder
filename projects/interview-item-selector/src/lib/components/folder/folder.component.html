@let allItemsChecked = allItemsChecked$ | async;
@let anyItemsChecked = anyItemsChecked$ | async;

<div class="header">
  <label>
    <input
      type="checkbox"
      [checked]="allItemsChecked"
      [indeterminate]="anyItemsChecked && !allItemsChecked"
      (click)="toggleFolderChecked()"
    />
    {{ folder().title }}
  </label>
  <button class="toggle-expand" (click)="toggleFolderExpanded()">
    <span class="arrow" [class.expanded]="expanded()">&#708;</span>
  </button>
</div>

@if (expanded()) {
  <ul>
    @for (childFolder of childFolders$ | async; track childFolder.id) {
      <li><app-folder [id]="childFolder.id" [level]="level() + 1" /></li>
    } @for (childItem of childItems$ | async; track childItem.id) {
    <li><app-item [id]="childItem.id" [level]="level() + 1" /></li>
  }
  </ul>

}
